<div class="bg-[#232328]/90 rounded-xl shadow-lg p-6 border border-[#333337]">
    <!-- Header -->
    <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 pb-6 mb-6 border-b border-[#444444]/50">
        <h2 class="text-xl font-semibold text-[#EAEAEA]">Gestión de Productos</h2>
        <button (click)="toggleForm()" 
                class="bg-[#1849DC] hover:bg-[#1a53f0] text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors">
            <i class="fas fa-plus"></i>
            <span>Agregar Producto</span>
        </button>
    </div>

    <!-- Formulario para agregar producto -->
    <div *ngIf="showForm" class="bg-[#1a1a1d]/80 rounded-lg p-6 mb-6 border border-[#444444]/50">
        <h3 class="text-lg font-medium text-[#EAEAEA] mb-4">Registrar Nuevo Producto</h3>
        <form [formGroup]="productForm" (ngSubmit)="register()" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- Grupo de Campos -->
            <div class="space-y-2">
                <label for="name" class="block text-sm font-medium text-[#EAEAEA]">Nombre</label>
                <input type="text" id="name" formControlName="name" placeholder="Nombre del producto"
                       class="w-full px-4 py-2 rounded-lg bg-[#232328] border border-[#444444]/50 text-[#EAEAEA] focus:border-[#00f2ff]/50 focus:ring-1 focus:ring-[#00f2ff]/30">
                <div *ngIf="productForm.get('name')?.invalid && productForm.get('name')?.touched" class="text-red-400 text-xs">
                    <div *ngIf="productForm.get('name')?.errors?.['required']">El nombre es requerido.</div>
                    <div *ngIf="productForm.get('name')?.errors?.['maxlength']">Máximo 255 caracteres.</div>
                </div>
            </div>

            <div class="space-y-2">
                <label for="description" class="block text-sm font-medium text-[#EAEAEA]">Descripción</label>
                <textarea id="description" formControlName="description" placeholder="Descripción detallada"
                       class="w-full px-4 py-2 rounded-lg bg-[#232328] border border-[#444444]/50 text-[#EAEAEA] focus:border-[#00f2ff]/50 focus:ring-1 focus:ring-[#00f2ff]/30 h-20"></textarea>
                <div *ngIf="productForm.get('description')?.invalid && productForm.get('description')?.touched" class="text-red-400 text-xs">
                    <div *ngIf="productForm.get('description')?.errors?.['required']">La descripción es requerida.</div>
                    <div *ngIf="productForm.get('description')?.errors?.['maxlength']">Máximo 255 caracteres.</div>
                </div>
            </div>

            <div class="space-y-2">
                <label for="stock_weight" class="block text-sm font-medium text-[#EAEAEA]">Peso en Stock (kg)</label>
                <input type="number" id="stock_weight" formControlName="stock_weight" placeholder="0.00"
                       class="w-full px-4 py-2 rounded-lg bg-[#232328] border border-[#444444]/50 text-[#EAEAEA] focus:border-[#00f2ff]/50 focus:ring-1 focus:ring-[#00f2ff]/30">
                <div *ngIf="productForm.get('stock_weight')?.invalid && productForm.get('stock_weight')?.touched" class="text-red-400 text-xs">
                    <div *ngIf="productForm.get('stock_weight')?.errors?.['required']">El peso es requerido.</div>
                    <div *ngIf="productForm.get('stock_weight')?.errors?.['min']">Debe ser un valor positivo.</div>
                </div>
            </div>

            <div class="space-y-2">
                <label for="exit_code" class="block text-sm font-medium text-[#EAEAEA]">Código de Salida</label>
                <input type="text" id="exit_code" formControlName="exit_code" placeholder="Código único"
                       class="w-full px-4 py-2 rounded-lg bg-[#232328] border border-[#444444]/50 text-[#EAEAEA] focus:border-[#00f2ff]/50 focus:ring-1 focus:ring-[#00f2ff]/30">
                <div *ngIf="productForm.get('exit_code')?.invalid && productForm.get('exit_code')?.touched" class="text-red-400 text-xs">
                    <div *ngIf="productForm.get('exit_code')?.errors?.['required']">El código es requerido.</div>
                    <div *ngIf="productForm.get('exit_code')?.errors?.['maxlength']">Máximo 255 caracteres.</div>
                </div>
            </div>

            <div class="space-y-2">
                <label for="image" class="block text-sm font-medium text-[#EAEAEA]">Imagen</label>
                <input type="text" id="image" formControlName="image" placeholder="URL de la imagen"
                       class="w-full px-4 py-2 rounded-lg bg-[#232328] border border-[#444444]/50 text-[#EAEAEA] focus:border-[#00f2ff]/50 focus:ring-1 focus:ring-[#00f2ff]/30">
                <div *ngIf="productForm.get('image')?.invalid && productForm.get('image')?.touched" class="text-red-400 text-xs">
                    <div *ngIf="productForm.get('image')?.errors?.['required']">La URL es requerida.</div>
                    <div *ngIf="productForm.get('image')?.errors?.['maxlength']">Máximo 255 caracteres.</div>
                </div>
            </div>

            <div class="space-y-2">
                <label for="area" class="block text-sm font-medium text-[#EAEAEA]">Área</label>
                <select id="area" formControlName="area"
                       class="w-full px-4 py-2 rounded-lg bg-[#232328] border border-[#444444]/50 text-[#EAEAEA] focus:border-[#00f2ff]/50 focus:ring-1 focus:ring-[#00f2ff]/30">
                    <option value="">Seleccionar área</option>
                    <option value="Electrónica">Electrónica</option>
                    <option value="Cables">Cables</option>
                    <option value="Componentes">Componentes</option>
                    <option value="Almacén">Almacén</option>
                </select>
                <div *ngIf="productForm.get('area')?.invalid && productForm.get('area')?.touched" class="text-red-400 text-xs">
                    <div *ngIf="productForm.get('area')?.errors?.['required']">El área es requerida.</div>
                </div>
            </div>

            <!-- Botones del formulario -->
            <div class="flex items-end gap-3 md:col-span-2">
                <button type="submit" 
                        class="bg-[#1849DC] hover:bg-[#1a53f0] text-white px-4 py-2 rounded-lg transition-colors">
                    Registrar Producto
                </button>
                <button type="button" (click)="toggleForm()"
                        class="bg-[#333337] hover:bg-[#444444] text-[#EAEAEA] px-4 py-2 rounded-lg transition-colors">
                    Cancelar
                </button>
            </div>
        </form>

        <!-- Mensajes de error/éxito -->
        <div *ngIf="errorMessage" class="mt-4 p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400 flex items-center gap-2">
            <i class="fas fa-exclamation-circle"></i>
            {{ errorMessage }}
        </div>
    </div>

    <!-- Mensaje de éxito -->
    <div *ngIf="successMessage" class="mb-6 p-3 bg-green-500/10 border border-green-500/30 rounded-lg text-green-400 flex items-center gap-2">
        <i class="fas fa-check-circle"></i>
        {{ successMessage }}
    </div>

    <!-- Tabla de productos -->
    <div *ngIf="!showForm" class="overflow-x-auto rounded-lg border border-[#444444]/50">
        <table class="w-full text-[#EAEAEA] text-sm">
            <thead>
                <tr class="bg-[#1a1a1d] text-[#EAEAEA]">
                    <th class="p-4 text-left font-medium">Producto</th>
                    <th class="p-4 text-left font-medium">Descripción</th>
                    <th class="p-4 text-left font-medium">Peso</th>
                    <th class="p-4 text-left font-medium">Código</th>
                    <th class="p-4 text-left font-medium">Área</th>
                    <th class="p-4 text-left font-medium">Imagen</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-[#444444]/50">
                <tr *ngFor="let product of products" class="hover:bg-[#2a2a2e]/80 transition-colors">
                    <td class="p-4 text-left font-medium text-[#00f2ff]">{{ product.name }}</td>
                    <td class="p-4 text-left text-[#7d7d7d]">{{ product.description }}</td>
                    <td class="p-4 text-left">{{ product.stock_weight }} kg</td>
                    <td class="p-4 text-left">
                        <span class="bg-[#333337] px-2 py-1 rounded text-xs">{{ product.exit_code }}</span>
                    </td>
                    <td class="p-4 text-left">
                        <span class="bg-[#1a1a1d] px-3 py-1 rounded-full text-xs">{{ product.area }}</span>
                    </td>
                    <td class="p-4 text-left">
                        <img [src]="product.image || 'assets/default-product.png'" 
                            alt="{{ product.name }}"
                            class="w-16 h-16 object-cover rounded-lg border border-[#444444]/50">
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Mensaje cuando no hay productos -->
    <div *ngIf="!showForm && products.length === 0" class="p-8 text-center text-[#7d7d7d] border border-[#444444]/50 rounded-lg">
        <i class="fas fa-box-open text-3xl mb-2"></i>
        <p>No se encontraron productos registrados</p>
        <button (click)="toggleForm()" class="mt-3 text-[#00f2ff] hover:text-[#00c4ff]">
            <i class="fas fa-plus mr-1"></i> Agregar primer producto
        </button>
    </div>
</div>